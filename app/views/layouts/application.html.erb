<!DOCTYPE html>
<html>
<head>
  <title><%= @title or "OpenHacker" %></title>
  <%= stylesheet_link_tag "application", :media => "all" %>
  <%= stylesheet_link_tag "#{params[:controller]}/#{params[:action]}.css" if Rails.application.assets.find_asset("#{params[:controller]}/#{params[:action]}.css") %>
  <%= csrf_meta_tags %>
  <!--[if !IE 7]>
  	<style type="text/css">
  		.wrapper {
  		  display: table;
  		  height: 100%;
  		}
  	</style>
  <![endif]-->
</head>
<body>
  <nav>
    <div class="inner">
      <a href="/" class="left">
        <h2>OpenHacker</h2>
      </a>
      <div class="middle">
        <%= yield(:middle) %>
      </div>
      <div class="right">
        <% if current_user %>
          <%= link_to "<div id=\"user\" data-username=\"#{current_user.username}\" data-token=\"#{current_user.github_token}\">#{current_user.full_name.split(" ").first}</div>".html_safe, current_user %>
          <%= link_to '<div>Vote</div>'.html_safe, next_entry if current_voting_challenge %>
          <%= link_to Entry.find_by_challenge_id_and_user_id(current_open_challenge.id, current_user.id).present? ? '<div>Your Entry</div>'.html_safe : '<div>Submit</div>'.html_safe, submit_path if current_open_challenge %>
          <%= link_to "<div>Sign Out</div>".html_safe, signout_path %>
        <% else %>
          <%= link_to '<div>About</div>'.html_safe, about_path %>
          <%= link_to '<div>Vote</div>'.html_safe, next_entry if current_voting_challenge %>
          <%= link_to '<div>Submit</div>'.html_safe, submit_path if current_open_challenge %>
          <%= link_to '<div>Sign in with GitHub</div>'.html_safe, auth_path %>
        <% end %>
      </div>
    </div>
  </nav>
  <section>
    <div class="inner <%= yield(:section_class) %>">
      <%= yield %>
    </div>
  </section>
  <footer>
    <div class="inner">
      <%= link_to "News", "http://thelist.io/", :target => "_blank" %>
      <span>&nbsp;&#8226;&nbsp;</span>
      <%= link_to "Hall of Fame", top_path %>
      <span>&nbsp;&#8226;&nbsp;</span>
      <%= link_to "Suggestions", challenge_suggestions_path %>
      <span>&nbsp;&#8226;&nbsp;</span>
      <%= link_to "Archives", challenges_path %>
      <span>&nbsp;&#8226;&nbsp;</span>
      <%= link_to "Rules", rules_path %>
      <span>&nbsp;&#8226;&nbsp;</span>
      <%= link_to "Source Code", "https://github.com/JacksonGariety/OpenHacker", :target => "_blank" %>
      <% if current_user %>
        <span>&nbsp;&#8226;&nbsp;</span>
        <%= link_to "About".html_safe, about_path%>
      <% end %>
    </div>
  </footer>
  <%= javascript_include_tag "application" %>
  <%= javascript_include_tag "#{params[:controller]}/#{params[:action]}.js" if Rails.application.assets.find_asset("#{params[:controller]}/#{params[:action]}.js") %>
</body>
</html>